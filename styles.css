/* =========================
   Reset
========================= */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
html, body {
  height: 100%;
  background: #111;
  color: #fff;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto,
    "Noto Sans JP", "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif;
}
button, input, select {
  font: inherit;
}

/* =========================
   Common
========================= */
.container { padding: 12px; }
.row { margin-bottom: 12px; }
label { display: block; margin-bottom: 6px; color: #ddd; }
input[type="text"], select, input[type="number"] {
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #333;
  background: #1a1a1a;
  color: #fff;
}

.btn {
  padding: 12px 16px;
  border-radius: 10px;
  border: none;
  background: #2c7be5;
  color: white;
  font-weight: 700;
}
.btn.secondary { background: #444; }
.btn.warn { background: #c92a2a; }
.btn:active { opacity: .85; }

.grid2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.screen { display: none; }
.screen.active { display: block; }

.active-selected {
  background: #2c7be5 !important;
  color: #fff !important;
}

.endchange-row {
  margin-top: 32px;
}

/* =========================
   Guidance layout
   左 4/5: バンド1〜6（以前と同じ高さ比）
   右 1/5: 専用サイドエリア
========================= */

/* 案内画面のルート要素 */
#screen-guidance {
  /* vh対策をしていれば var(--vh) を使う。していなくても 1vh にフォールバック */
  height: calc(var(--vh, 1vh) * 100);
  width: 100%;
  overflow: hidden;

  display: flex;           /* 左右 2 カラムに分ける */
}

/* 左右をまとめるラッパ（screenGuidance で作った guidance-layout） */
.guidance-layout {
  display: flex;
  flex: 1 1 auto;
  width: 100%;
  height: 100%;
}

/* 左側: バンド群（4/5幅）→ ここを以前と同じ 6 段グリッドにする */
.guidance-main {
  flex: 4 1 0;
  display: grid;
  grid-template-rows: 2.0fr 1.2fr 0.6fr 0.8fr 0.5fr 0.5fr;  /* ★ 以前と同じ比率で 6 段 */
  height: 100%;
}

/* 右側: 専用エリア（1/5幅）。余白は作らない */
.guidance-side {
  flex: 1 1 0;
  height: 100%;
  margin: 0;
  padding: 0;
  /* 必要なら背景だけ変える
  background: #181818;
  */
}



.band {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 8px;
}

/* =========================
   Band1（両数＋種別縦書き）
========================= */
.band1 {
  display: flex;
  flex-direction: row;   /* 必ず左右並び */
  align-items: stretch;
  justify-content: stretch;
  padding: 0px 0px;
}

/* 左 2/3：両数アイコン */
.band1-left {
  flex: 2;
  display: flex;
  align-items: center;
  justify-content: center;
  order: 1;             /* 両数を左側に固定 */
}

/* 右 1/3：種別縦書き */
.band1-right {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  order: 2;             /* 種別を右側に固定 */
  min-width: 72px;      /* ★ 種別表示のために最低幅を確保 */
}

/* 両数表示エリアの中央寄せ用 */
.cars-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
}

/* ひし形アイコン本体 */
.diamond {
  width:  min(27vw, 150px);
  height: min(27vw, 150px);
  transform: rotate(45deg);
  display: flex;
  align-items: center;
  justify-content: center;
  border: 16px solid transparent;
}

.diamond span {
  font-size: clamp(28px, 10vw, 70px);
  transform: rotate(-45deg);
  font-weight: bold;
}

/* ひし形配色（両数） */
.d10 { background: #ff7f00; color: #000; }
.d8  { background: #ffd000; border-color: #000; color: #000; background-clip: padding-box; }
.d6  { background: #ff8c3a; border-color: #000; color: #000; }
.d4  { background: #0057b8; border-color: #fff; color: #fff; }
.d7  { background: #c1121f; color: #fff; }

/* ひし形アイコン画像を使う場合 */
.carIcon {
  width: 80%;
  max-width: 200px;
  object-fit: contain;
}

/* =========================
   種別バッジ（共通：横書きベース）
========================= */
.badge {
  padding: 6px 12px;
  border-radius: 10px;
  font-size: clamp(14px, 5vw, 32px);
  font-weight: 800;
  border-width: 3px;
  border-style: solid;
}

/* 種別配色 */
.j-tokkyu           { background: #d90429; color: #fff; }
.j-storea,
.j-storb_down,
.j-storb_up         { background: #fff; color: #000; border-color: #9acd32; }
.j-kaisokukyuko,
.j-chikakaiku       { background: #800080; color: #fff; }
.j-kyuko            { background: #ff7f00; color: #fff; }
.j-tsukin_kyuko     { background: #ffae00; color: #000; }
.j-kaisoku          { background: #87ceeb; color: #000; }
.j-junkyu           { background: #1f7a1f; color: #fff; }
.j-tsukin_junkyu    { background: #0057b8; color: #fff; }
.j-kukan_junkyu     { background: #9acd32; color: #000; }
.j-kakutei          { background: #808080; color: #fff; }
.j-kaiso,
.j-rinji-a          { background: #fff; color: #d90429; border-color: #d90429; }

/* =========================
   縦書き種別バッジ（上書き）
   class="badge badge-vertical j-xxx"
========================= */
.badge-vertical {
  writing-mode: vertical-rl;
  text-orientation: mixed;

  /* 文字サイズをかなり大きく（約3倍クラス） */
  font-size: clamp(24px, 10vw, 200px);
  font-weight: 900;

  /* 余白と枠も太めに */
  padding: 24px 10px;
  border-radius: 16px;
  border-width: 6px;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  max-height: 100%;
  overflow: hidden;
}

/* =========================
   Band2（お知らせ）
========================= */
.band2 {
  background: #111;
  color: #fff;
  padding: 1px 8px;
}
.notes {
  font-size: clamp(12px, 3.8vw, 18px);
  line-height: 1.2;
}

/* GPS表示（GPS + 速度）を横並び */
.gps-row {
  display: flex;
  align-items: center;
  gap: 10px;
}
#gpsSpeed {
  font-weight: 700;
}

/* =========================
   Band3（列番・行先 + 駅間表示）
========================= */
.band3 {
  background: #111;
  display: grid;
  grid-template-columns: 1fr 1fr; /* 中央で半分 */
  gap: 8px;
  padding: 1px 8px;
  align-items: center;
}

.band3-left,
.band3-right {
  display: flex;
  align-items: center;
  justify-content: center;
}

.band3-left .traininfo {
  display: flex;   /* 横並び */
  gap: 6px;
}

/* cell（列番・行先） */
.band3 .cell {
  padding: 4px 6px;
  font-size: clamp(14px, 4.3vw, 26px);
  font-weight: 700;
}

/* 駅間表示 */
#segmentInfo {
  font-size: clamp(12px, 4.1vw, 24px);
  font-weight: 700;
  white-space: nowrap;
}

/* =========================
   Band4（発車時刻）
========================= */
.band4 {
  background: #000;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0px 8px;
}

.band4 #nextDepart {
  font-size: clamp(12px, 4.8vw, 36px);
  font-weight: 700;
}

/* =========================
   Band5（メニュー）
========================= */
.band5 {
  background: #000;
  display: grid;
  grid-template-columns: 1fr 5fr;
  align-items: stretch;
}

.clock {
  font-size: clamp(14px, 4.2vw, 24px);
  font-weight: 700;
}
.menu-btn {
  font-size: clamp(12px, 3.8vw, 22px);
}

/* =========================
   Band6（時刻・遅延・GPS）
========================= */
.band6 {
  background: #000;
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;  /* 時刻 / 遅延 / GPS を3列で横並び */
  align-items: center;
  justify-items: center;
  padding: 1px 8px;
}


/* =========================
   Start screen
========================= */
.centered {
  height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 14px;
}

/* =========================
   音声停止ボタン
========================= */
.btn.muted,
.btn.secondary.muted {
  background-color: #b44;
  color: #fff;
  border-color: #922;
}

.btn.muted:hover,
.btn.secondary.muted:hover {
  background-color: #a33;
}

/* =========================
   Menu modal（メニューウィンドウ）
========================= */
.modal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: none;                   /* ★ 初期状態では非表示 */
  align-items: center;
  justify-content: center;
  padding: 18px;
  z-index: 1000;                   /* 念のため前面に */
}

.modal.active {
  display: flex;                   /* ★ JSで .active を付けたときだけ表示 */
}

.panel {
  background: #1a1a1a;
  color: #fff;
  border-radius: 16px;
  width: min(720px, 96vw);
  max-height: 84vh;
  overflow: auto;
  padding: 16px;
  border: 1px solid #333;
}

.list {
  display: grid;
  gap: 8px;
}

.sep {
  border: none;
  border-top: 1px solid #333;
  margin: 16px 0;
}

.small {
  font-size: 12px;
  color: #aaa;
}

/* =========================
   ガイダンス画面全体の縦方向余白を圧縮
========================= */

/* 各バンド（band1〜band6）の上下パディングを小さくする */
#screen-guidance .band {
  padding-top: 0px;   /* ここを 1px にするとさらに詰まります */
  padding-bottom: 0px;
}

/* バンド同士のスキマも少しだけにする */
#screen-guidance .band + .band {
  margin-top: 0px;    /* 以前より大きければ 0〜1px にしてもOK */
}

/* band6 だけ別に指定していた場合はこちらで上書き */
#screen-guidance .band6 {
  padding-top: 1px;
  padding-bottom: 2px;
}

/* バンド内テキストの上下余白も軽く絞る */
#screen-guidance .clock,
#screen-guidance #delayInfo,
#screen-guidance #gpsStatusCompact,
#screen-guidance .notes,
#screen-guidance .traininfo .cell {
  padding-top: 0;
  padding-bottom: 0;
  line-height: 1.1;   /* デフォルトより少しだけ詰める */
}

/* ===== 案内画面中はページ全体のスクロールを禁止 ===== */
body.guidance-lock {
  overflow: hidden;      /* ページ全体の縦スクロールを止める */
}


.band3 {
  border-bottom: none;
}

:root {
  /* デフォルト値として 1vh を入れておく（あとでJSで上書き） */
  --vh: 1vh;
}

/* ===== 案内画面の左右分割レイアウト ===== */
/* ★ ここでは .screen.guidance だけ残して、
   guidance-layout / guidance-main / guidance-side は定義しない */
.screen.guidance {
  /* #screen-guidance で height や flex はすでに指定済みなので、
     向きだけ column にしておけばOK（モーダルなどの重なり対策） */
  display: flex;
  flex-direction: column;
}

/* ★ guidance-layout / guidance-main / guidance-side は
   すでに上の「Guidance layout」セクションで定義済みなので
   ここには書かない */

/* =========================
   Band1 最終版（両数＋種別）
   左：両数 / 右：種別（横並び固定）
========================= */

/* band1 全体：左右フレックスで横一列に並べる */
.band1 {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: stretch;
  padding: 0;
}

/* 左：両数（およそ全体の 2/3） */
.band1-left {
  flex: 2 1 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* 右：種別（およそ全体の 1/3 ＋ 最小幅を保証） */
.band1-right {
  flex: 1 1 0;
  min-width: 90px;          /* 種別表示のために最低限の横幅を確保 */
  display: flex;
  align-items: center;
  justify-content: center;
}

/* 縦書き種別バッジの最終調整（少しスリムに＆枠線細く） */
.badge-vertical {
  writing-mode: vertical-rl;
  text-orientation: mixed;

  font-size: clamp(20px, 6.5vh, 40px); /* 以前より少し小さめ：折り返しを防ぐ */
  font-weight: 900;

  padding: 16px 8px;        /* 上下・左右の余白も少しスリムに */
  border-radius: 14px;
  border-width: 4px;        /* ★ 枠線を細く（元は 6px） */
  border-style: solid;

  display: flex;
  align-items: center;
  justify-content: center;

  box-sizing: border-box;
  max-width: 100%;
  /* 高さ方向はグリッドの行高に合わせる。溢れたらそのまま（隠さない） */
}
